#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "→ ESLint on staged files"
npx lint-staged || exit 1

if command -v gitleaks >/dev/null 2>&1; then
  echo "→ gitleaks secret scan"
  gitleaks detect --source . --redact --no-git || exit 1
else
  echo "⚠ gitleaks not found; skipping secrets scan."
fi
